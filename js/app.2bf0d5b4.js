(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)o=r[d],s[o]&&m.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},s={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/calendar/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"25dc":function(t,e,n){"use strict";var a=n("5668"),s=n.n(a);s.a},"3c0c":function(t,e,n){"use strict";var a=n("b5da"),s=n.n(a);s.a},4356:function(t,e,n){},"48ec":function(t,e,n){},5582:function(t,e,n){},5668:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),s=n("8aa5"),i=n.n(s),o=(n("e71f"),{apiKey:"AIzaSyDvCcX-9xoc7M5mAUmlXENJhWh-Qt1K1hQ",authDomain:"vuetodoapp-3c409.firebaseapp.com",databaseURL:"https://vuetodoapp-3c409.firebaseio.com",projectId:"vuetodoapp-3c409",storageBucket:"vuetodoapp-3c409.appspot.com",messagingSenderId:"439072284249"}),r=i.a.initializeApp(o),c=r.firestore(),l=c,u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"entry-app"}},[n("nav",{staticClass:"navbar"},[n("span",{staticClass:"navbar-toggle",attrs:{id:"js-navbar-toggle"},on:{click:t.showNav}},[n("i",{staticClass:"fas fa-bars"})]),n("a",{staticClass:"logo",attrs:{href:"#"}},[t._v("Welcom to Here My Friend")]),n("ul",{staticClass:"main-nav",attrs:{id:"js-menu"}},[t.isLoggedIn?n("li",{staticClass:"username nav-links"},[n("span",[t._v(t._s(t.currentUser))])]):t._e(),t.isLoggedIn?n("li",[n("router-link",{staticClass:"nav-links",attrs:{to:{name:"todo"}}},[t._v("Dashboard")])],1):t._e(),t.isLoggedIn?t._e():n("li",[n("router-link",{staticClass:"nav-links",attrs:{to:{name:"login"}}},[t._v("Sign In")])],1),t.isLoggedIn?t._e():n("li",[n("router-link",{staticClass:"nav-links",attrs:{to:{name:"register"}}},[t._v("Create Account")])],1),t.isLoggedIn?n("li",[n("a",{staticClass:"nav-links",attrs:{href:"javascript:;"},on:{click:t.logout}},[t._v("Logout")])]):t._e()])]),n("transition",{attrs:{name:"router-animate","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut",mode:"out-in"}},[n("router-view")],1)],1)},d=[],m={name:"master",data:function(){return{isLoggedIn:!1,currentUser:!1}},methods:{logout:function(){var t=this;i.a.auth().signOut().then(function(){t.isLoggedIn=!1,t.currentUser=!1,t.$router.push({path:"/login"}),t.$toast.info({title:"logged out",message:"88 see u next time"})})},islogged:function(){this.isLoggedIn=!0,this.currentUser=i.a.auth().currentUser.email},showNav:function(){var t=document.getElementById("js-menu");t.classList.toggle("active")}},created:function(){this.$eventBus.$on("logging",this.islogged,this),i.a.auth().currentUser&&(this.isLoggedIn=!0,this.currentUser=i.a.auth().currentUser.email)}},h=m,f=(n("9556"),n("192f"),n("2877")),p=Object(f["a"])(h,u,d,!1,null,null,null),v=p.exports,g=n("8c4f"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper",attrs:{id:"app"}},[n("calendar"),n("todoFilter"),n("todoInput"),t.$store.state.loading?n("div",{staticClass:"lds-hourglass"}):t._e(),n("div",{attrs:{id:"list"}},t._l(t.todoIndex,function(t){return n("todoListItem",{key:t,attrs:{index:t}})}),1)],1)},y=[],D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"todoInput"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.todo,expression:"todo"},{name:"focus",rawName:"v-focus"}],attrs:{type:"text",placeholder:"待辦事項"},domProps:{value:t.todo},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")||!t._k(e.keyCode,"trim",void 0,e.key,void 0)?t.submitHandler(e):null},input:function(e){e.target.composing||(t.todo=e.target.value)}}})])},b=[],E={name:"todoInput",data:function(){return{todo:"",year:"",month:"",day:""}},computed:{bus:function(){return this.$eventBus}},methods:{submitHandler:function(){console.log(this.date),this.todo&&(this.$store.dispatch("ADD_TODO",{date:this.date,content:this.todo,complete:!1,year:this.year,month:this.month+1,day:this.day+1}),this.todo="")},dateInfos:function(){this.year=arguments.length<=1?void 0:arguments[1],this.month=arguments.length<=2?void 0:arguments[2],this.day=arguments.length<=0?void 0:arguments[0]}},created:function(){this.$eventBus.$on("dateInfos",this.dateInfos,this)}},I=E,O=(n("3c0c"),Object(f["a"])(I,D,b,!1,null,"30cf69fa",null)),w=O.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"todoListItem"},[null!==t.edit?n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.edit,expression:"edit",modifiers:{trim:!0}},{name:"focus",rawName:"v-focus"}],staticClass:"edit",attrs:{type:"text"},domProps:{value:t.edit},on:{keyup:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submitHandler(e):null},function(e){return"button"in e||!t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?t.cancelHandler(e):null}],blur:[t.cancelHandler,function(e){t.$forceUpdate()}],input:function(e){e.target.composing||(t.edit=e.target.value.trim())}}}):[n("input",{directives:[{name:"model",rawName:"v-model",value:t.complete,expression:"complete"}],staticClass:"toggle",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.complete)?t._i(t.complete,null)>-1:t.complete},on:{change:function(e){var n=t.complete,a=e.target,s=!!a.checked;if(Array.isArray(n)){var i=null,o=t._i(n,i);a.checked?o<0&&(t.complete=n.concat([i])):o>-1&&(t.complete=n.slice(0,o).concat(n.slice(o+1)))}else t.complete=s}}}),n("label",{on:{dblclick:t.editHandler}},[t._v(t._s(t.todo.content))]),n("button",{staticClass:"destroy",on:{click:t.destroyHandler}})]],2)},$=[],T=(n("c5f6"),{data:function(){return{edit:null}},name:"todoListItem",props:{index:{type:Number,required:!0}},computed:{todo:function(){return this.$store.state.todosFromDB[this.index]},complete:{get:function(){return this.todo.complete},set:function(t){this.$store.dispatch("UPDATE_TODO",{index:this.index,data:{id:this.todo.id,content:this.todo.content,complete:t}})}}},methods:{destroyHandler:function(){confirm("delete?")&&this.$store.dispatch("DELETE_TODO",this.index)},editHandler:function(){this.edit=this.todo.content,this.cache=this.todo.content},submitHandler:function(){this.edit&&(this.$store.dispatch("UPDATE_TODO",{index:this.index,data:{id:this.todo.id,content:this.edit,complete:this.todo.complete}}),this.cancelHandler())},cancelHandler:function(){this.edit=null}}}),x=T,k=(n("b6a8"),Object(f["a"])(x,C,$,!1,null,"3740a19e",null)),S=k.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app_calender"},[n("div",{staticClass:"box"},[n("div",{staticClass:"calender"},[n("div",{staticClass:"dateinfo"},[n("div",{staticClass:"arrow",on:{click:function(e){t.changeHandler(-1)}}},[t._v("<")]),t._v("\r\n        "+t._s(t.year)+"."+t._s(t.month_name[t.month])+"\r\n\r\n        "),n("div",{staticClass:"arrow",on:{click:function(e){t.changeHandler(1)}}},[t._v(">")])]),n("div",{staticClass:"head"},t._l(t.tags,function(e){return n("div",{key:e,staticClass:"day"},[t._v(t._s(e))])}),0),n("div",{staticClass:"body"},t._l(t.init,function(e,a){return n("div",{key:e.num,staticClass:"daybox",class:a===t.selectedDay?"active":"",style:t.get_pan(a),on:{click:function(e){t.clickHandler(a)}}},[n("div",{staticClass:"infos"},[n("div",{staticClass:"num"},[t._v(t._s(e.num))]),n("div",{staticClass:"lunar"})]),n("div",{staticClass:"eventdot",class:{has_event:e.events.length>0}})])}),0)])])])},U=[],N=(n("ac6a"),{name:"calendar",data:function(){return{tags:"日一二三四五六",days:[],selectedDay:0,startDay:1,lunarShift:5,newItem:{title:"",time:"",type:""},month_olympic:[31,29,31,30,31,30,31,31,30,31,30,31],month_normal:[31,28,31,30,31,30,31,31,30,31,30,31],month_name:["January","Febrary","March","April","May","June","July","Auguest","September","October","November","December"],month:0,year:2019}},computed:{init:function(){this.init_days();var t=this.days;return this.$store.state.todosFromDB.forEach(function(e){t[e.day-1].events.push(e)}),t},getDateinfo:function(){var t=new Date;return{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()}}},methods:{clickHandler:function(t){this.selectedDay=t,this.$eventBus.$emit("dateInfos",this.selectedDay,this.year,this.month)},chinese_num:function(t){var e="十一二三四五六七八九";return e[t]},lunar:function(t){return t>30&&(t%=30),t<11?"初"+this.chinese_num(t%10):t<20?"十"+this.chinese_num(t%10):20==t?"二十":t<30?"廿"+this.chinese_num(t%10):t<40?"三"+this.chinese_num(t%10):void 0},get_pan:function(t){return 0!==t?null:{"margin-left":"calc( ".concat(this.startDay," * 100% / 7)")}},getDayStart:function(t,e){return new Date(t,e,1).getDay()},changeHandler:function(t){this.month+=t,12===this.month&&this.year++,this.month<0&&(this.month=11,this.year--),this.month%=12,this.startDay=this.getDayStart(this.year,this.month),this.$store.commit("USER"),this.$store.dispatch("INIT",{year:this.year,month:this.month+1}),this.selectedDay=0,this.$eventBus.$emit("dateInfos",this.selectedDay,this.year,this.month)},init_days:function(){this.days=[];for(var t=this.month_normal[this.month],e=1;e<=t;e++){var n={num:e,events:[]};this.days.push(n)}}},mounted:function(){var t=new Date;t=new Date(t.setDate(1));var e=t.getDay();this.startDay=e,this.selectedDay=this.getDateinfo.day-1,this.month=this.getDateinfo.month-1,this.init_days(),this.$eventBus.$emit("dateInfos",this.selectedDay,this.year,this.month),this.$store.commit("USER"),this.$store.dispatch("INIT",{year:this.year,month:this.month+1})}}),B=N,L=(n("88ef"),Object(f["a"])(B,A,U,!1,null,"1168653b",null)),M=L.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"nav"}},[n("div",{class:{btn_active:"all"==t.filter},on:{click:function(e){t.changfilter("all")}}},[t._v("\r\n    All\r\n  ")]),t._v("\r\n  |\r\n  "),n("div",{class:{btn_active:"active"==t.filter},on:{click:function(e){t.changfilter("active")}}},[t._v("\r\n    Active\r\n  ")]),t._v("\r\n  |\r\n  "),n("div",{class:{btn_active:"complete"==t.filter},on:{click:function(e){t.changfilter("complete")}}},[t._v("\r\n    Complete\r\n  ")])])},F=[],j={name:"todoFilter",data:function(){return{filter:"all"}},methods:{changfilter:function(t){this.$store.dispatch("CHANGE_FILTER",t),this.filter=t}}},H=j,R=(n("25dc"),Object(f["a"])(H,P,F,!1,null,"5c265822",null)),q=R.exports,G={components:{todoInput:w,todoListItem:S,calendar:M,todoFilter:q},data:function(){return{select:-1}},computed:{todoIndex:function(){return this.$store.getters.todoDBIndex(this.select)}},methods:{dateInfos:function(){this.select=(arguments.length<=0?void 0:arguments[0])+1}},created:function(){this.$eventBus.$on("dateInfos",this.dateInfos,this)}},J=G,V=(n("efc4"),Object(f["a"])(J,_,y,!1,null,null,null)),W=V.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-form page-wrapper"},[n("h2",{staticClass:"login-heading"},[t._v("Login")]),n("div",[n("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[t.success?n("div",{staticClass:"success"},[t._v(t._s(t.success))]):t._e(),t.serverError?n("div",{staticClass:"input-error"},[t._v(t._s(t.serverError))]):t._e(),n("div",{staticClass:"form-control"},[n("label",{staticClass:"input-label",attrs:{for:"email"}},[t._v("Username/Email ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"focus",rawName:"v-focus"}],staticClass:"login-input",class:{inputErr:t.errors.has("email")},attrs:{type:"email",name:"username",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("span",{staticClass:"validateErr"},[t._v(t._s(t.errors.first("email")))]),n("div",{staticClass:"form-control"},[n("label",{staticClass:"input-label",attrs:{for:"password"}},[t._v("Password ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"}],staticClass:"login-input",class:{inputErr:t.errors.has("password")},attrs:{type:"password",name:"password",id:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("span",{staticClass:"validateErr"},[t._v(t._s(t.errors.first("password")))]),n("div",{staticClass:"btn-control"},[t.loading?n("div",{staticClass:"lds-ring-contianer"},[t._m(0)]):t._e(),n("button",{staticClass:"btn-submit",attrs:{type:"submit",disabled:t.loading}},[t._v("\r\n          Log In\r\n        ")])])])])])},K=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lds-ring"},[n("div"),n("div"),n("div"),n("div")])}],Q={name:"login",props:{successMessage:{type:String}},data:function(){return{username:"",password:"",serverError:"",success:this.successMessage,loading:!1}},methods:{validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(e){e&&t.login()})},login:function(){var t=this;this.loading=!0,i.a.auth().signInWithEmailAndPassword(this.username,this.password).then(function(e){e.user;t.loading=!1,t.$eventBus.$emit("logging"),t.$router.push({path:"/todo"}),t.$toast.success({title:"logged in successfuly",message:"todo here"})},function(e){t.loading=!1,t.serverError=e.message,t.password="",t.success=""})}}},X=Q,Y=(n("a528"),Object(f["a"])(X,z,K,!1,null,"77095742",null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-form page-wrapper"},[n("h2",{staticClass:"login-heading"},[t._v("Register")]),n("div",[n("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[t.serverError?n("div",{staticClass:"input-error"},[t._v(t._s(t.serverError))]):t._e(),n("div",{staticClass:"form-control"},[n("label",{staticClass:"input-label",attrs:{for:"email"}},[t._v("Email ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"login-input",class:{inputErr:t.errors.has("email")},attrs:{type:"email",name:"email",id:"email"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("span",{staticClass:"validateErr"},[t._v(t._s(t.errors.first("email")))]),n("div",{staticClass:"form-control"},[n("label",{staticClass:"input-label",attrs:{for:"password"}},[t._v("Password ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"}],staticClass:"login-input",class:{inputErr:t.errors.has("password")},attrs:{type:"password",name:"password",id:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("span",{staticClass:"validateErr"},[t._v(t._s(t.errors.first("password")))]),t._m(0)])])])},et=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btn-control"},[n("button",{staticClass:"btn-submit",attrs:{type:"submit"}},[t._v("Create Account")])])}],nt={name:"register",data:function(){return{username:"",password:"",serverError:""}},methods:{validateBeforeSubmit:function(){var t=this;this.$validator.validateAll().then(function(e){e&&t.register()})},register:function(){var t=this;console.log(i.a),i.a.auth().createUserWithEmailAndPassword(this.username,this.password).then(function(e){var n=e.user;alert("Account Created for ".concat(n.email));var a="Register Successfuly";i.a.auth().signOut().then(function(){t.$router.push({name:"login",params:{successMessage:a}}),t.$toast.success({title:a,message:"logging here"})})},function(e){t.serverError=e.message})}}},at=nt,st=(n("8d17"),Object(f["a"])(at,tt,et,!1,null,"12edbcf6",null)),it=st.exports;a["a"].use(g["a"]);var ot=new g["a"]({routes:[{path:"/",name:"home",redirect:"/login"},{path:"/todo",name:"todo",component:W,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:Z,props:!0,meta:{requiresGuest:!0}},{path:"/register",name:"register",component:it,meta:{requiresGuest:!0}}]});ot.beforeEach(function(t,e,n){t.matched.some(function(t){return t.meta.requiresAuth})?i.a.auth().currentUser?n():n({path:"/login",query:{redirect:t.fullPath}}):t.matched.some(function(t){return t.meta.requiresGuest})&&i.a.auth().currentUser?n({path:"/todo",query:{redirect:t.fullPath}}):n()});var rt=ot,ct=(n("20d6"),n("55dd"),n("f499")),lt=n.n(ct),ut=n("2f62");a["a"].use(ut["a"]);var dt,mt=i.a.auth().currentUser,ht={load:function(){return JSON.parse(localStorage.getItem("todos")||"[]")},save:function(t){localStorage.setItem("todos",lt()(t))}},ft={all:function(t){return t},active:function(t){return t.filter(function(t){return!t.complete})},complete:function(t){return t.filter(function(t){return t.complete})}},pt=new ut["a"].Store({strict:!0,state:{user:i.a.auth().email,todosFromDB:[],loading:!1,filter:"all",todos:[]},getters:{todoIndex:function(t){return ft[t.filter](t.todos).map(function(e){return t.todos.indexOf(e)})},todoDBIndex:function(t){return function(e){if(-1!==e){var n=t.todosFromDB.filter(function(t){return t.day===e});return ft[t.filter](n).map(function(e){return t.todosFromDB.indexOf(e)})}}}},mutations:{SET_TODOS:function(t,e){t.todos=e,ht.save(t.todos)},ADD_TODO:function(t,e){t.todosFromDB.push({id:e.id,content:e.content,complete:e.complete,year:e.year,month:e.month,day:e.day})},UPDATE_TODO:function(t,e){var n=e.index,a=e.data;t.todosFromDB[n].content=a.content,t.todosFromDB[n].complete=a.complete},REMOVE_TODO:function(t,e){e>=0&&t.todosFromDB.splice(e,1)},SET_FILTER:function(t,e){t.filter=e},RETRIEVE_TODO:function(t,e){t.loading=!t.loading,t.todos=e},IS_LOADING:function(t){t.loading=!t.loading},INIT:function(t,e){t.loading=!t.loading,t.todosFromDB=e},NOTHING:function(t){t.todosFromDB=[],t.loading=!t.loading},USER:function(t){t.user=i.a.auth().currentUser.email}},actions:{INIT:function(t,e){var n=t.commit;n("IS_LOADING"),l.collection(this.state.user).where("year","==",e.year).where("month","==",e.month).get().then(function(t){if(t.empty)n("NOTHING");else{var e=[];t.forEach(function(t){var n={id:t.data().id,content:t.data().title,complete:t.data().completed,year:t.data().year,month:t.data().month,day:t.data().day,timestamp:t.data().timestamp};e.push(n)});var a=e.sort(function(t,e){return t.timestamp.seconds-e.timestamp.seconds});n("INIT",a)}})},INIT_TODOS:function(t){var e=t.commit;e("SET_TODOS",ht.load())},CHANGE_FILTER:function(t,e){var n=t.commit;n("SET_FILTER",e)},RETRIEVE_TODO:function(t){var e=t.commit;e("IS_LOADING"),l.collection(this.state.user).get().then(function(t){var n=[];t.forEach(function(t){var e={id:t.id,content:t.data().title,complete:t.data().completed,timestamp:t.data().timestamp};n.push(e)});var a=n.sort(function(t,e){return t.timestamp.seconds-e.timestamp.seconds});e("RETRIEVE_TODO",a)})},ADD_TODO:function(t,e){var n=this,a=t.commit;l.collection(this.state.user).add({title:e.content,completed:e.complete,timestamp:new Date,year:e.year,month:e.month,day:e.day}).then(function(t){a("ADD_TODO",{id:t.id,content:e.content,complete:e.complete,year:e.year,month:e.month,day:e.day}),l.collection(n.state.user).doc(t.id).set({id:t.id},{merge:!0})})},DELETE_TODO:function(t,e){var n=t.commit,a=this.state.todosFromDB[e].id;console.log(e,a),l.collection(this.state.user).doc(a).delete().then(function(){n("REMOVE_TODO",e)})},UPDATE_TODO:function(t,e){var n=t.commit;l.collection(this.state.user).doc(e.data.id).set({title:e.data.content,completed:e.data.complete},{merge:!0}).then(function(){n("UPDATE_TODO",e)})},REALTIME_LISTENERS:function(t){var e=this,n=t.commit;l.collection(mt).onSnapshot(function(t){t.docChanges().forEach(function(t){var a=e.state.todos.findIndex(function(e){return e.id===t.doc.id});if("added"===t.type){var s=t.doc.metadata.hasPendingWrites?"Local":"Server";"Server"===s&&n("ADD_TODO",{id:t.doc.id,content:t.doc.data().title,complete:t.doc.data().completed})}"modified"===t.type&&n("UPDATE_TODO",{index:a,data:{id:t.doc.id,content:t.doc.data().title,complete:t.doc.data().completed}}),"removed"===t.type&&n("REMOVE_TODO",a)})})}}}),vt=n("31bd"),gt=n("d847"),_t=n.n(gt),yt=n("a4bb"),Dt=n.n(yt),bt=function(t){var e=this;return this.handles={},this.eventUIDMap={},this.$on=function(n,a,s){e.handles[n]||(e.handles[n]=[]),a instanceof Function&&e.handles[n].push(a),s instanceof t&&e.setEventUIDMap(s._uid,n,a)},this.setEventUIDMap=function(t,n,a){e.eventUIDMap[t]||(e.eventUIDMap[t]={}),e.eventUIDMap[t][n]||(e.eventUIDMap[t][n]=[]),e.eventUIDMap[t][n].push(a)},this.$off=function(t,n){if(e.handles[t])if(n){if(n instanceof Function)for(var a=e.handles[t].length,s=0;s<a;s++){var i=e.handles[t][s];i===n&&e.handles[t].splice(s,1)}}else delete e.handles[t]},this.$offbyUID=function(t){var n=e.eventUIDMap[t]||{};Dt()(n).forEach(function(t){n[t].forEach(function(n){e.$off(t,n)}),delete n[t]}),delete e.eventUIDMap[t]},this.$emit=function(t){if(e.handles[t]){for(var n=e.handles[t].length,a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];for(var o=0;o<n;o++){var r;(r=e.handles[t])[o].apply(r,s)}}},this},Et={install:function(t){var e=new bt(t);_t()(t.prototype,{$eventBus:{get:function(){return e}}}),t.mixin({beforeDestroy:function(){this.$eventBus.$offbyUID(this._uid)}})}},It=Et,Ot=n("7bb1"),wt=n("427f"),Ct=n.n(wt),$t=n("1888"),Tt=n.n($t),xt={position:"bottom right",showDuration:2e3,timeOut:3e3,progressBar:!0};Object(vt["sync"])(pt,rt),a["a"].config.productionTip=!1,a["a"].use(Tt.a,xt),a["a"].use(Ot["b"]),a["a"].use(It),Ot["a"].localize("zh_TW",Ct.a),a["a"].directive("focus",{inserted:function(t){t.focus()}}),i.a.auth().onAuthStateChanged(function(t){dt||(dt=new a["a"]({router:rt,store:pt,render:function(t){return t(v)}}).$mount("#app"))})},"88ef":function(t,e,n){"use strict";var a=n("9f37"),s=n.n(a);s.a},"8d17":function(t,e,n){"use strict";var a=n("a39f"),s=n.n(a);s.a},9556:function(t,e,n){"use strict";var a=n("a2ee"),s=n.n(a);s.a},"9f37":function(t,e,n){},a2ee:function(t,e,n){},a39f:function(t,e,n){},a528:function(t,e,n){"use strict";var a=n("4356"),s=n.n(a);s.a},b5da:function(t,e,n){},b6a8:function(t,e,n){"use strict";var a=n("5582"),s=n.n(a);s.a},efc4:function(t,e,n){"use strict";var a=n("48ec"),s=n.n(a);s.a}});
//# sourceMappingURL=app.2bf0d5b4.js.map